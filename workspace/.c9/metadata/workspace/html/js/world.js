{"filter":false,"title":"world.js","tooltip":"/html/js/world.js","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":148,"column":18},"end":{"row":148,"column":19},"action":"remove","lines":["r"],"id":31182}],[{"start":{"row":148,"column":18},"end":{"row":148,"column":19},"action":"insert","lines":["d"],"id":31183}],[{"start":{"row":148,"column":19},"end":{"row":148,"column":20},"action":"insert","lines":["i"],"id":31184}],[{"start":{"row":148,"column":20},"end":{"row":148,"column":21},"action":"insert","lines":["g"],"id":31185}],[{"start":{"row":148,"column":18},"end":{"row":148,"column":21},"action":"remove","lines":["dig"],"id":31186},{"start":{"row":148,"column":18},"end":{"row":148,"column":19},"action":"insert","lines":["r"]}],[{"start":{"row":148,"column":19},"end":{"row":148,"column":20},"action":"insert","lines":["e"],"id":31187}],[{"start":{"row":148,"column":20},"end":{"row":148,"column":21},"action":"insert","lines":["m"],"id":31188}],[{"start":{"row":148,"column":21},"end":{"row":148,"column":22},"action":"insert","lines":["v"],"id":31189}],[{"start":{"row":148,"column":22},"end":{"row":148,"column":23},"action":"insert","lines":["e"],"id":31190}],[{"start":{"row":148,"column":22},"end":{"row":148,"column":23},"action":"remove","lines":["e"],"id":31191}],[{"start":{"row":148,"column":21},"end":{"row":148,"column":22},"action":"remove","lines":["v"],"id":31192}],[{"start":{"row":148,"column":21},"end":{"row":148,"column":22},"action":"insert","lines":["o"],"id":31193}],[{"start":{"row":148,"column":22},"end":{"row":148,"column":23},"action":"insert","lines":["v"],"id":31194}],[{"start":{"row":148,"column":23},"end":{"row":148,"column":24},"action":"insert","lines":["e"],"id":31195}],[{"start":{"row":148,"column":25},"end":{"row":148,"column":33},"action":"remove","lines":["tilesMap"],"id":31196}],[{"start":{"row":148,"column":25},"end":{"row":148,"column":26},"action":"remove","lines":[","],"id":31197}],[{"start":{"row":148,"column":25},"end":{"row":148,"column":26},"action":"remove","lines":[" "],"id":31198}],[{"start":{"row":148,"column":22},"end":{"row":148,"column":23},"action":"remove","lines":["v"],"id":31199}],[{"start":{"row":148,"column":21},"end":{"row":148,"column":22},"action":"remove","lines":["o"],"id":31200}],[{"start":{"row":148,"column":20},"end":{"row":148,"column":21},"action":"remove","lines":["m"],"id":31201}],[{"start":{"row":148,"column":19},"end":{"row":148,"column":20},"action":"remove","lines":["e"],"id":31202}],[{"start":{"row":148,"column":18},"end":{"row":148,"column":19},"action":"remove","lines":["r"],"id":31203}],[{"start":{"row":148,"column":18},"end":{"row":148,"column":19},"action":"insert","lines":["d"],"id":31204}],[{"start":{"row":148,"column":19},"end":{"row":148,"column":20},"action":"insert","lines":["i"],"id":31205}],[{"start":{"row":148,"column":20},"end":{"row":148,"column":21},"action":"insert","lines":["g"],"id":31206}],[{"start":{"row":148,"column":21},"end":{"row":148,"column":22},"action":"remove","lines":["e"],"id":31207}],[{"start":{"row":150,"column":11},"end":{"row":223,"column":38},"action":"remove","lines":["var tilesToReset = [];","","           var rx = utils.even(coord.x);","           var ry = utils.even(coord.y);","           (function() {","             for (var x = rx - 1; x <= rx + 2; x++) {","               for (var y = ry - 1; y <= ry + 2; y++) {","                 var index = tilesMap.indexAt(x, y);","                 if (index >= 0) {","                   if (x == rx - 1 || x == rx + 2 || y == ry - 1 || y == ry + 2) {","","                     // okraje vyresetuj","                     if (tilesMap.map[index] != resources.VOID) {","                       tilesMap.map[index] = resources.DIRT.M1;","                       tilesToReset.push([x, y]);","","                       var tile = sceneObjectsMap[x][y];","                       var v = tilesMap.map[index];","                       var tileCols = tile.image.width / resources.TILE_SIZE;","                       tile.sourceRect = {","                         x: ((v - 1) % tileCols) * resources.TILE_SIZE,","                         y: Math.floor((v - 1) / tileCols) * resources.TILE_SIZE,","                         height: resources.TILE_SIZE,","                         width: resources.TILE_SIZE","                       };","","                     }","","                   }","                   else {","                     tilesMap.map[index] = resources.VOID;","                     sceneObjects.removeChild(sceneObjectsMap[x][y]);","                   }","                 }","               }","             }","           })();","","","           // Přegeneruj hrany","           (function() {","             tilesToReset.forEach(function(item) {","               var x = item[0];","               var y = item[1];","               var tile = sceneObjectsMap[x][y];","               var v = generator.generateEdge(tilesMap, x, y);","               var tileCols = tile.image.width / resources.TILE_SIZE;","               tile.sourceRect = {","                 x: ((v - 1) % tileCols) * resources.TILE_SIZE,","                 y: Math.floor((v - 1) / tileCols) * resources.TILE_SIZE,","                 height: resources.TILE_SIZE,","                 width: resources.TILE_SIZE","               };","             });","           })();","","           // Přegeneruj rohy","           (function() {","             tilesToReset.forEach(function(item) {","               var x = item[0];","               var y = item[1];","               var tile = sceneObjectsMap[x][y];","               var v = generator.generateCorner(tilesMap, x, y);","               var tileCols = tile.image.width / resources.TILE_SIZE;","               tile.sourceRect = {","                 x: ((v - 1) % tileCols) * resources.TILE_SIZE,","                 y: Math.floor((v - 1) / tileCols) * resources.TILE_SIZE,","                 height: resources.TILE_SIZE,","                 width: resources.TILE_SIZE","               };","             });","           })();","","           sceneObjects.updateCache();"],"id":31208}],[{"start":{"row":150,"column":0},"end":{"row":151,"column":0},"action":"remove","lines":["           ",""],"id":31209}],[{"start":{"row":149,"column":0},"end":{"row":150,"column":0},"action":"remove","lines":["",""],"id":31210}],[{"start":{"row":149,"column":0},"end":{"row":150,"column":0},"action":"remove","lines":["",""],"id":31211}],[{"start":{"row":147,"column":11},"end":{"row":147,"column":72},"action":"remove","lines":["var coord = render.pixelsToTiles(event.stageX, event.stageY);"],"id":31212}],[{"start":{"row":147,"column":0},"end":{"row":148,"column":0},"action":"remove","lines":["           ",""],"id":31213}],[{"start":{"row":147,"column":22},"end":{"row":147,"column":29},"action":"remove","lines":["coord.x"],"id":31214},{"start":{"row":147,"column":22},"end":{"row":147,"column":34},"action":"insert","lines":["event.stageX"]}],[{"start":{"row":147,"column":42},"end":{"row":147,"column":43},"action":"remove","lines":["y"],"id":31215}],[{"start":{"row":147,"column":41},"end":{"row":147,"column":42},"action":"remove","lines":["."],"id":31216}],[{"start":{"row":147,"column":36},"end":{"row":147,"column":41},"action":"remove","lines":["coord"],"id":31217}],[{"start":{"row":147,"column":36},"end":{"row":147,"column":48},"action":"insert","lines":["event.stageX"],"id":31218}],[{"start":{"row":147,"column":47},"end":{"row":147,"column":48},"action":"remove","lines":["X"],"id":31219}],[{"start":{"row":147,"column":47},"end":{"row":147,"column":48},"action":"insert","lines":["y"],"id":31220}],[{"start":{"row":147,"column":47},"end":{"row":147,"column":48},"action":"remove","lines":["y"],"id":31221}],[{"start":{"row":147,"column":47},"end":{"row":147,"column":48},"action":"insert","lines":["Y"],"id":31222}],[{"start":{"row":151,"column":7},"end":{"row":154,"column":92},"action":"remove","lines":["// vygenerováno ... nacachuj","       // cachuje se od y= -TILE_SIZE protože tiles mají počátek vlevo DOLE","       // http://www.createjs.com/docs/easeljs/classes/Container.html#method_cache","       sceneObjects.cache(0, -resources.TILE_SIZE, sceneObjects.width, sceneObjects.height);"],"id":31223}],[{"start":{"row":151,"column":0},"end":{"row":152,"column":0},"action":"remove","lines":["       ",""],"id":31224}],[{"start":{"row":151,"column":0},"end":{"row":152,"column":0},"action":"remove","lines":["",""],"id":31225}],[{"start":{"row":223,"column":55},"end":{"row":224,"column":0},"action":"insert","lines":["",""],"id":31226},{"start":{"row":224,"column":0},"end":{"row":224,"column":11},"action":"insert","lines":["           "]}],[{"start":{"row":224,"column":11},"end":{"row":224,"column":12},"action":"insert","lines":["r"],"id":31227}],[{"start":{"row":224,"column":12},"end":{"row":224,"column":13},"action":"insert","lines":["e"],"id":31228}],[{"start":{"row":224,"column":13},"end":{"row":224,"column":14},"action":"insert","lines":["n"],"id":31229}],[{"start":{"row":224,"column":11},"end":{"row":224,"column":14},"action":"remove","lines":["ren"],"id":31230},{"start":{"row":224,"column":11},"end":{"row":224,"column":17},"action":"insert","lines":["render"]}],[{"start":{"row":224,"column":17},"end":{"row":224,"column":18},"action":"insert","lines":["-"],"id":31231}],[{"start":{"row":224,"column":18},"end":{"row":224,"column":19},"action":"insert","lines":["s"],"id":31232}],[{"start":{"row":224,"column":18},"end":{"row":224,"column":19},"action":"remove","lines":["s"],"id":31233}],[{"start":{"row":224,"column":17},"end":{"row":224,"column":18},"action":"remove","lines":["-"],"id":31234}],[{"start":{"row":224,"column":17},"end":{"row":224,"column":18},"action":"insert","lines":["."],"id":31235}],[{"start":{"row":224,"column":18},"end":{"row":224,"column":19},"action":"insert","lines":["s"],"id":31236}],[{"start":{"row":224,"column":19},"end":{"row":224,"column":20},"action":"insert","lines":["h"],"id":31237}],[{"start":{"row":224,"column":18},"end":{"row":224,"column":20},"action":"remove","lines":["sh"],"id":31238},{"start":{"row":224,"column":18},"end":{"row":224,"column":24},"action":"insert","lines":["shiftX"]}],[{"start":{"row":224,"column":23},"end":{"row":224,"column":24},"action":"remove","lines":["X"],"id":31239}],[{"start":{"row":224,"column":23},"end":{"row":224,"column":24},"action":"insert","lines":["Y"],"id":31240}],[{"start":{"row":224,"column":24},"end":{"row":224,"column":26},"action":"insert","lines":["()"],"id":31241}],[{"start":{"row":224,"column":25},"end":{"row":224,"column":31},"action":"insert","lines":["rndDst"],"id":31242}],[{"start":{"row":224,"column":32},"end":{"row":224,"column":33},"action":"insert","lines":[";"],"id":31243}],[{"start":{"row":225,"column":11},"end":{"row":226,"column":36},"action":"remove","lines":["screenOffsetY += rndDst;","           sceneObjects.y += rndDst;"],"id":31244}],[{"start":{"row":225,"column":0},"end":{"row":226,"column":0},"action":"remove","lines":["           ",""],"id":31245}],[{"start":{"row":223,"column":0},"end":{"row":224,"column":0},"action":"remove","lines":["           // Horizontální pohyb se projevuje na pozadí",""],"id":31246},{"start":{"row":224,"column":0},"end":{"row":225,"column":0},"action":"insert","lines":["           // Horizontální pohyb se projevuje na pozadí",""]}],[{"start":{"row":48,"column":0},"end":{"row":48,"column":3},"action":"remove","lines":["   "],"id":31247}],[{"start":{"row":256,"column":28},"end":{"row":256,"column":29},"action":"insert","lines":["r"],"id":31248}],[{"start":{"row":256,"column":29},"end":{"row":256,"column":30},"action":"insert","lines":["e"],"id":31249}],[{"start":{"row":256,"column":30},"end":{"row":256,"column":31},"action":"insert","lines":["n"],"id":31250}],[{"start":{"row":256,"column":31},"end":{"row":256,"column":32},"action":"insert","lines":["d"],"id":31251}],[{"start":{"row":256,"column":32},"end":{"row":256,"column":33},"action":"insert","lines":["e"],"id":31252}],[{"start":{"row":256,"column":33},"end":{"row":256,"column":34},"action":"insert","lines":["r"],"id":31253}],[{"start":{"row":256,"column":34},"end":{"row":256,"column":35},"action":"insert","lines":["."],"id":31254}],[{"start":{"row":280,"column":41},"end":{"row":281,"column":0},"action":"insert","lines":["",""],"id":31255},{"start":{"row":281,"column":0},"end":{"row":281,"column":11},"action":"insert","lines":["           "]}],[{"start":{"row":281,"column":11},"end":{"row":281,"column":33},"action":"insert","lines":["render.shiftY(rndDst);"],"id":31256}],[{"start":{"row":281,"column":23},"end":{"row":281,"column":24},"action":"remove","lines":["Y"],"id":31257}],[{"start":{"row":281,"column":23},"end":{"row":281,"column":24},"action":"insert","lines":["X"],"id":31258}],[{"start":{"row":283,"column":0},"end":{"row":284,"column":36},"action":"remove","lines":["           screenOffsetX += rndDst;","           sceneObjects.x += rndDst;"],"id":31261}],[{"start":{"row":283,"column":0},"end":{"row":284,"column":0},"action":"remove","lines":["",""],"id":31262}],[{"start":{"row":296,"column":26},"end":{"row":296,"column":27},"action":"insert","lines":["r"],"id":31263}],[{"start":{"row":296,"column":27},"end":{"row":296,"column":28},"action":"insert","lines":["e"],"id":31264}],[{"start":{"row":296,"column":26},"end":{"row":296,"column":28},"action":"remove","lines":["re"],"id":31265},{"start":{"row":296,"column":26},"end":{"row":296,"column":32},"action":"insert","lines":["render"]}],[{"start":{"row":296,"column":32},"end":{"row":296,"column":33},"action":"insert","lines":["."],"id":31266}],[{"start":{"row":321,"column":18},"end":{"row":321,"column":19},"action":"insert","lines":["r"],"id":31267}],[{"start":{"row":321,"column":19},"end":{"row":321,"column":20},"action":"insert","lines":["e"],"id":31268}],[{"start":{"row":321,"column":18},"end":{"row":321,"column":20},"action":"remove","lines":["re"],"id":31269},{"start":{"row":321,"column":18},"end":{"row":321,"column":24},"action":"insert","lines":["result"]}],[{"start":{"row":321,"column":18},"end":{"row":321,"column":24},"action":"remove","lines":["result"],"id":31270}],[{"start":{"row":321,"column":18},"end":{"row":321,"column":19},"action":"insert","lines":["r"],"id":31271}],[{"start":{"row":321,"column":19},"end":{"row":321,"column":20},"action":"insert","lines":["e"],"id":31272}],[{"start":{"row":321,"column":20},"end":{"row":321,"column":21},"action":"insert","lines":["m"],"id":31273}],[{"start":{"row":321,"column":20},"end":{"row":321,"column":21},"action":"remove","lines":["m"],"id":31274}],[{"start":{"row":321,"column":20},"end":{"row":321,"column":21},"action":"insert","lines":["n"],"id":31275}],[{"start":{"row":321,"column":21},"end":{"row":321,"column":22},"action":"insert","lines":["."],"id":31276}],[{"start":{"row":321,"column":21},"end":{"row":321,"column":22},"action":"remove","lines":["."],"id":31277}],[{"start":{"row":321,"column":18},"end":{"row":321,"column":21},"action":"remove","lines":["ren"],"id":31278},{"start":{"row":321,"column":18},"end":{"row":321,"column":24},"action":"insert","lines":["render"]}],[{"start":{"row":321,"column":24},"end":{"row":321,"column":25},"action":"insert","lines":["."],"id":31279}],[{"start":{"row":427,"column":0},"end":{"row":428,"column":0},"action":"remove","lines":["",""],"id":31280}],[{"start":{"row":74,"column":19},"end":{"row":74,"column":25},"action":"remove","lines":["render"],"id":31281}],[{"start":{"row":74,"column":19},"end":{"row":74,"column":20},"action":"remove","lines":["."],"id":31282}],[{"start":{"row":75,"column":18},"end":{"row":75,"column":24},"action":"remove","lines":["render"],"id":31283}],[{"start":{"row":75,"column":18},"end":{"row":75,"column":19},"action":"remove","lines":["."],"id":31284}]]},"ace":{"folds":[],"scrolltop":1612,"scrollleft":0,"selection":{"start":{"row":147,"column":50},"end":{"row":147,"column":50},"isBackwards":false},"options":{"tabSize":2,"useSoftTabs":true,"guessTabSize":false,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":131,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1455208159436,"hash":"5a61b6ebf6149625eee12e2eea666f4d43afb168"}